<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
    <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="前端," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="&amp;lt;script src=&quot;../build/react.js&quot;&amp;gt;&amp;lt;/script&amp;gt;

&amp;lt;!--Reactjs 核心库--&amp;gt;

&amp;lt;script src=&quot;../build/react-dom.js&quot;&amp;gt;&amp;lt;/script&amp;gt;

&amp;lt;!--react-dom 提供与操作DOM相关的功能--&amp;gt;

&amp;lt;script src=&quot;../bui">
<meta property="og:type" content="article">
<meta property="og:title" content="React 笔记">
<meta property="og:url" content="http://yoursite.com/2015/12/25/React-笔记/index.html">
<meta property="og:site_name" content="ImpGuier">
<meta property="og:description" content="&amp;lt;script src=&quot;../build/react.js&quot;&amp;gt;&amp;lt;/script&amp;gt;

&amp;lt;!--Reactjs 核心库--&amp;gt;

&amp;lt;script src=&quot;../build/react-dom.js&quot;&amp;gt;&amp;lt;/script&amp;gt;

&amp;lt;!--react-dom 提供与操作DOM相关的功能--&amp;gt;

&amp;lt;script src=&quot;../bui">
<meta property="og:updated_time" content="2015-12-31T07:14:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React 笔记">
<meta name="twitter:description" content="&amp;lt;script src=&quot;../build/react.js&quot;&amp;gt;&amp;lt;/script&amp;gt;

&amp;lt;!--Reactjs 核心库--&amp;gt;

&amp;lt;script src=&quot;../build/react-dom.js&quot;&amp;gt;&amp;lt;/script&amp;gt;

&amp;lt;!--react-dom 提供与操作DOM相关的功能--&amp;gt;

&amp;lt;script src=&quot;../bui">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'hide',
    motion: true
  };
</script>

  <title> React 笔记 | ImpGuier </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-hk">
<a style="position: absolute; top: 0; left: 0; z-index:10;border:none;" href="https://github.com/impguier"><img style="border: 0;" src="https://camo.githubusercontent.com/8b6b8ccc6da3aa5722903da7b58eb5ab1081adee/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png"></a>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">ImpGuier</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            關於
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                React 笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            發表於
            <time itemprop="dateCreated" datetime="2015-12-25T11:35:43+08:00" content="2015-12-25">
              2015-12-25
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/25/React-笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/25/React-笔记/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><pre><code><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"../build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>

<span class="comment">&lt;!--Reactjs 核心库--&gt;</span>

<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"../build/react-dom.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>

<span class="comment">&lt;!--react-dom 提供与操作DOM相关的功能--&gt;</span>

<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"../build/browser.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>

<span class="comment">&lt;!--Browser.js 将JSX语法转换为JS语法,最好在服务器端进行转换--&gt;</span>

<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/babel"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>

<span class="comment">&lt;!--JSX语法的文件都放在这里,注意--&gt;</span>
</code></pre><hr>
<pre><code>var names = ['小a','小b','小c'];
ReactDOM.render(
    <span class="tag">&lt;<span class="title">div</span>&gt;</span>
    <span class="comment">&lt;!-- '&lt;'开始以html代码解析 --&gt;</span>
    {
    <span class="comment">&lt;!-- '{}'开始以html代码解析 --&gt;</span>
        names.map(function(name){
            return <span class="tag">&lt;<span class="title">div</span>&gt;</span>Hello,{name}!<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        })
    }
    <span class="tag">&lt;/<span class="title">div</span>&gt;</span>,
    document.getElementById('example')
)
</code></pre><hr>
<pre><code>var HelloMessage = React.createClass({
    render:function(){
        return <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Hello {this.props.name}<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
    }
});

ReactDOM.render(
    <span class="tag">&lt;<span class="title">HelloMessage</span> <span class="attribute">name</span>=<span class="value">'Imp'</span> /&gt;</span>,
    document.getElementById('example')
);
<span class="comment">&lt;!-- 组件名首字母必须大写 &amp;&amp; 组件应该只有一个子节点--&gt;</span>
</code></pre><hr>
<pre><code>var NotesList = React.createClass({
    render:function(){
        return (
            <span class="tag">&lt;<span class="title">ol</span>&gt;</span>
            {
                React.Children.map(this.props.children,function(child){
                    return <span class="tag">&lt;<span class="title">li</span>&gt;</span>{child}<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
                })
            }
            <span class="tag">&lt;/<span class="title">ol</span>&gt;</span>
        )
    }
});

ReactDOM.render(
    <span class="tag">&lt;<span class="title">NOtesList</span>&gt;</span>
        <span class="tag">&lt;<span class="title">span</span>&gt;</span>hello<span class="tag">&lt;/<span class="title">span</span>&gt;</span>
        <span class="tag">&lt;<span class="title">span</span>&gt;</span>world<span class="tag">&lt;/<span class="title">span</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">NOtesList</span>&gt;</span>,
    document.body
);
<span class="comment">&lt;!-- 使用this.props.children 访问组件的子节点 
     如果组件没有子节点,值是undifined
     如果组件只有一个,值是object
     如果组件有多个,值是array
--&gt;</span>
</code></pre><hr>
<pre><code>var MyTitle = React.createClass({
    propTypes:{
        title:React.PropTypes.string.isRequired
    },
    render:function(){
        return <span class="tag">&lt;<span class="title">h1</span>&gt;</span>{this.prop.title}<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
    }
});

var data = 123;
ReactDOM.render(
    <span class="tag">&lt;<span class="title">MyTitle</span> <span class="attribute">title</span>=<span class="value">{data}</span> /&gt;</span>,
    document.body
)
<span class="comment">&lt;!-- 
    可以通过propTypes里添加props的被需要的输入类型
    如果要给prop设置默认值,可以通过getDefaultProps:function(){}进行设置
 --&gt;</span>
</code></pre><hr>
<pre><code> var MyComponent = React.createClass({
    handleClick : function(){
        this.refs.myTextInput.focus();
    },
    render:function(){
        return (
            <span class="tag">&lt;<span class="title">div</span>&gt;</span>
                <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">ref</span>=<span class="value">"myTextInput"</span> /&gt;</span>
                <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"button"</span> <span class="attribute">value</span>=<span class="value">"Focus the text input"</span> <span class="attribute">onClick</span>=<span class="value">{this.handleClick}</span> /&gt;</span>
            <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        )
    }
 });
ReactDOM.render(
    <span class="tag">&lt;<span class="title">MyComponent</span> /&gt;</span>,
    document.getElementById("example")
)
<span class="comment">&lt;!-- this.refs.myTextInput 来获取DOM元素 --&gt;</span>
</code></pre><hr>
<pre><code><span class="keyword">var</span> LikeButton = React.createClass({
  <span class="attribute">getInitialState</span>: <span class="keyword">function</span>() {
    <span class="keyword">return</span> {<span class="attribute">liked</span>: <span class="literal">false</span>};
  },
  <span class="attribute">handleClick</span>: <span class="keyword">function</span>(event) {
    <span class="keyword">this</span>.setState({<span class="attribute">liked</span>: !<span class="keyword">this</span>.state.liked});
  },
  <span class="attribute">render</span>: <span class="keyword">function</span>() {
    <span class="keyword">var</span> text = <span class="keyword">this</span>.state.liked ? <span class="string">'like'</span> : <span class="string">'haven\'t liked'</span>;
    <span class="keyword">return</span> (
      &lt;p onClick={<span class="keyword">this</span>.handleClick}&gt;
        You {text} <span class="keyword">this</span>. Click <span class="keyword">to</span> toggle.
      &lt;/p&gt;
    );
  }
});

ReactDOM.render(
  &lt;LikeButton /&gt;,
  <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)
);
&lt;!-- 
     getInitialState <span class="pi">////</span> get <span class="keyword">by</span> <span class="keyword">this</span>.state  <span class="pi">////</span>/ set <span class="keyword">by</span> <span class="keyword">this</span>.setState
     you can user component attribute <span class="keyword">to</span> register event handlers<span class="function">
--&gt;</span> 
</code></pre><hr>
<pre><code>var Input = React.createClass({
  getInitialState: <span class="function"><span class="keyword">function</span><span class="params">()</span></span> {
    <span class="keyword">return</span> {<span class="keyword">value</span>: <span class="string">'Hello!'</span>};
  },
  handleChange: <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span> {
    this.setState({<span class="keyword">value</span>: event.<span class="type">target</span>.<span class="keyword">value</span>});
  },
  render: <span class="function"><span class="keyword">function</span></span> () {
    var <span class="keyword">value</span> = this.state.<span class="keyword">value</span>;
    <span class="keyword">return</span> (
      &lt;div&gt;
        &lt;input <span class="keyword">type</span>=<span class="string">"text"</span> <span class="keyword">value</span>={<span class="keyword">value</span>} onChange={this.handleChange} /&gt;
        &lt;p&gt;{<span class="keyword">value</span>}&lt;/p&gt;
      &lt;/div&gt;
    );
  }
});

ReactDOM.render(&lt;Input/&gt;, document.body);
&lt;<span class="comment">!-- </span>
    <span class="keyword">if</span> u want to <span class="keyword">access</span> or update the <span class="keyword">value</span> <span class="type">in</span> response to user input,u can user onChange event
 --&gt;
</code></pre><hr>
<ul>
<li>componentWillMount(): Fired once, before initial rendering occurs. Good place to wire-up message listeners. this.setState doesn’t work here.</li>
<li>componentDidMount(): Fired once, after initial rendering occurs. Can use this.getDOMNode().</li>
<li>componentWillUpdate(object nextProps, object nextState): Fired after the component’s updates are made to the DOM. Can use this.getDOMNode() for updates.</li>
<li>componentDidUpdate(object prevProps, object prevState): Invoked immediately after the component’s updates are flushed to the DOM. This method is not called for the initial render. Use this as an opportunity to operate on the DOM when the component has been updated.</li>
<li>componentWillUnmount(): Fired immediately before a component is unmounted from the DOM. Good place to remove message listeners or general clean up.</li>
<li>componentWillReceiveProps(object nextProps): Fired when a component is receiving new props. You might want to this.setState depending on the props.</li>
<li><p>shouldComponentUpdate(object nextProps, object nextState): Fired before rendering when new props or state are received. return false if you know an update isn’t needed.</p>
<blockquote>
<p>three main parts of lifecycle:mouting(insert),updating(rerender),unmounting(remove)<br>  will methods are called before sth happens , did method are called after sth happens </p>
</blockquote>
</li>
</ul>
<hr>
<pre><code><span class="keyword">var</span> <span class="type">UserGist</span> = <span class="type">React</span>.createClass({
     getInitialState: function(){
         <span class="keyword">return</span> {
             username:'',
             lastGistUrl:''
         }
     },
     componentDidMount:function(){
         $.get(this.props.source,function(<span class="literal">result</span>){
             <span class="keyword">var</span> lastGist = <span class="literal">result</span>[<span class="number">0</span>];
             <span class="keyword">if</span>(this.isMounted()){
                 this.setState({
                     username:lastGist.owner.login,
                     lastGistUrl:lastGist.html_url
                 }):
             }
         }.<span class="keyword">bind</span>(this));
     },
     render:function(){
         <span class="keyword">return</span> (
             &lt;<span class="keyword">div</span>&gt;
             {this.state.username}'s last gist <span class="keyword">is</span> 
             &lt;a href={this.stat.lastGistUrl}&gt;here&lt;/a&gt;.
             &lt;/<span class="keyword">div</span>&gt;
         );
     }
});
<span class="type">ReactDOM</span>.render(
  &lt;<span class="type">UserGist</span> source=<span class="string">"https://api.github.com/users/octocat/gists"</span> /&gt;,
  document.body
);
 &lt;!-- <span class="type">Ajax</span> happens <span class="keyword">in</span> componentDidMount --&gt;
</code></pre><hr>
<p>安装 Babel 用以解析JSX<br>    npm install -g babel<br>用法<br>    babel src —out-dir build</p>
<p>   1.<a href="http://facebook.github.io/react/docs/reusable-components.html" target="_blank" rel="external">PropTypes 支持验证的类型</a><br>   2.<a href="http://facebook.github.io/react/docs/events.html#supported-events" target="_blank" rel="external">React 支持的事件类型</a><br>   3.<a href="http://facebook.github.io/react/docs/forms.html" target="_blank" rel="external">表单类型</a><br>   4.<a href="http://facebook.github.io/react/docs/component-specs.html#lifecycle-methods" target="_blank" rel="external">整个生命周期的钩子方法</a></p>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/前端/" rel="tag">#前端</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/12/08/从浏览器渲染原理讲CSS性能/" rel="next" title="从浏览器渲染原理讲CSS性能">
                <i class="fa fa-chevron-left"></i> 从浏览器渲染原理讲CSS性能
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/12/31/2016将做之事/" rel="prev" title="2016 WiLl Be BeTtEr">
                2016 WiLl Be BeTtEr <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


        </div>

        


        
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/12/25/React-笔记/"
           data-title="React 笔记" data-url="http://yoursite.com/2015/12/25/React-笔记/">
      </div>
    
  </div>


      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目錄
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            本站概覽
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/avatar.jpg" alt="ImpGuier" itemprop="image"/>
          <p class="site-author-name" itemprop="name">ImpGuier</p>
        </div>
        <p class="site-description motion-element" itemprop="description">越努力越幸运 既然找不到什么爱好,那就爱好一切吧</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">2</span>
              <span class="site-state-item-name">分類</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">標籤</span>
              
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/impguier" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/1634722323" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">Links</p>
            
              <span class="links-of-author-item">
                <a href="http://imkratos.github.io/" target="_blank">志硕之站</a>
              </span>
            
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <p class="post-toc-empty">此文章未包含目錄</p>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ImpGuier</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"impguier"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    motionMiddleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');
      if (CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    };
  });
</script>



  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
